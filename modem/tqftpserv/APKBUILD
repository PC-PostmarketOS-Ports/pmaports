# Maintainer: Dolphin von Chips <DoIphinChips@protonmail.com>
pkgname=tqftpserv
pkgver=0_git20240126
pkgrel=0
_commit="0ae406219bce1c93e63f6892efd2e34306131428"
pkgdesc="Trivial File Transfer Protocol server over AF_QIPCRTR"
url="https://github.com/andersson/tqftpserv"
arch="all"
license="BSD-3-Clause"
makedepends="qrtr-dev"
source="https://github.com/andersson/tqftpserv/archive/$_commit/tqftpserv-$_commit.tar.gz
	tqftpserv.initd
	"
subpackages="$pkgname-doc $pkgname-openrc"
builddir="$srcdir/tqftpserv-$_commit"
options="!check" # No test suite

build() {
	make prefix="/usr"
}

package() {
	make prefix="/usr" DESTDIR="$pkgdir" install
	rm -r "$pkgdir"/usr/lib/systemd

	install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/COPYING
	install -Dm755 "$srcdir"/tqftpserv.initd "$pkgdir"/etc/init.d/tqftpserv
}

sha512sums="
2789efaf872afcd363b97c0efea85e04f13a6e450cc0349f31ec1363b9c278991e27f88e5f741c874378de5e4baf5923b1a281a7b5ceac8a3546c1767f9f6b1b  tqftpserv-0ae406219bce1c93e63f6892efd2e34306131428.tar.gz
9fde613a1ed53e633ab676e37245d40598deb4b6896c379054389adad5af9f110fcf95871fe31bad3f0ed9321ba3cee8a2160b95e56873719382f81063a85721  tqftpserv.initd
"
