# Maintainer: Dolphin von Chips <DoIphinChips@protonmail.com>
pkgname=tqftpserv
pkgver=1.0_git20230118
pkgrel=0
_commit="de42697a2466cc5ee267ffe36ab4e8494f005fb0"
pkgdesc="Trivial File Transfer Protocol server over AF_QIPCRTR"
url="https://github.com/andersson/tqftpserv"
arch="all"
license="BSD-3-Clause"
makedepends="qrtr-dev"
source="https://github.com/andersson/tqftpserv/archive/$_commit/tqftpserv-$_commit.tar.gz
	tqftpserv.initd
	"
subpackages="$pkgname-doc $pkgname-openrc"
builddir="$srcdir/tqftpserv-$_commit"
options="!check" # No test suite

build() {
	make prefix="/usr"
}

package() {
	make prefix="/usr" DESTDIR="$pkgdir" install
	rm -r "$pkgdir"/usr/lib/systemd

	install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/COPYING
	install -Dm755 "$srcdir"/tqftpserv.initd "$pkgdir"/etc/init.d/tqftpserv
}

sha512sums="
49701cf323d1eaf63b27a61d3864b78ede6986fb2b540e0d5d17e726f9ca546b0c4e5afc3234774a3d2d3bed72efbd631b096b29aeae2dc5191e63d3f2996961  tqftpserv-de42697a2466cc5ee267ffe36ab4e8494f005fb0.tar.gz
9fde613a1ed53e633ab676e37245d40598deb4b6896c379054389adad5af9f110fcf95871fe31bad3f0ed9321ba3cee8a2160b95e56873719382f81063a85721  tqftpserv.initd
"
